<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AeroPay</title>
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Arial, sans-serif; padding: 24px; }
    </style>
    <script src="https://sdk.aeropay.com/ap/aeropay.js"></script>
  </head>
  <body>
    <div id="aeropay-button-container"></div>
    <script>
      (function(){
        function run(){
          try {
            window.AeroPay.init({ env: 'sandbox' });

            var onSuccess = function(uuid) {
              console.log(uuid);
              try {
                if (window.ReactNativeWebView && window.ReactNativeWebView.postMessage) {
                  window.ReactNativeWebView.postMessage(JSON.stringify({ type: 'success', uuid: uuid }));
                }
              } catch(_){}}

            // event callback is optional 
            var onEvent = function(event) {
              console.log(event);
            };

            var apButton = window.AeroPay.button({
              location: '6ced28ccc4',
              type: 'checkout',
              onSuccess: onSuccess,
              onEvent: onEvent,
              forceIframe: true
            });

            apButton.total('88.50');
            apButton.render('aeropay-button-container');
          } catch (e) { console.log('AeroPay run error', e); }
        }

        (function waitForSDK(){
          if (window.AeroPay && typeof window.AeroPay.button === 'function') return run();
          setTimeout(waitForSDK, 50);
        })();
      })();
    </script>
  </body>
 </html>